# 課題名

データベース設計のアンチパターン3
課題1

# 課題

```
「漫画と小説どちらにもコメントを紐付けられるようにしたい」という要望を受けて、前任のエンジニアはbelongs_to_idを定義し、そこにmanga_idあるいはnovel_idを格納することで解決しました。また、belongs_to_idがmangaとnovelどちらを指しているのか判別できるようtypeも追加しました。以下のような状態です。

上記の設計で、どのような問題が発生するでしょうか？
```

# 結論

- 外部キーが貼れないため、belongs_to_id が存在しないidの可能性があり、整合性が担保できない
- 検索時に type, belong_to_id の組で検索しなければならず、インデックスを貼っても性能が落ちやすそう

